(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6919:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>O});var t=s(95155),a=s(13295),l=s(43601),n=s(12115),i=s(41829),c=s(1494),o=s(84520),d=s(1493),m=s(97376),u=s(51410);let x="kanban-board-data",h={name:"My Kanban Board",columns:[{title:"To Do",index:0,cards:[]},{title:"In Progress",index:1,cards:[]},{title:"Done",index:2,cards:[]}]};function g(e){try{localStorage.setItem(x,JSON.stringify(e))}catch(e){console.error("Error saving board to localStorage:",e)}}function p(e){let{modalProps:r,colIndex:s,columnName:a,board:x,setBoard:h}=e,[p,f]=(0,n.useState)(""),[b,j]=(0,n.useState)(""),[y,N]=(0,n.useState)(!1),v=async()=>{if(p.trim()){N(!0);try{let e=function(e,r,s,t){let a={id:"card_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),title:s,description:t,column_id:r,board_id:1,is_deleted:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},l={...e,columns:e.columns.map((e,s)=>s===r?{...e,cards:[...e.cards,a]}:e)};return g(l),l}(x,s,p.trim(),b.trim());f(""),j(""),r.onClose(),h(e)}catch(e){console.error("Error creating task:",e)}finally{N(!1)}}};return(0,t.jsx)(i.Y,{isOpen:r.isOpen,onOpenChange:r.onOpenChange,placement:"center",backdrop:"opaque",size:"lg",classNames:{wrapper:"",base:"max-w-2xl",backdrop:"!bg-[rgba(0,0,0,0.5)]"},hideCloseButton:!0,children:(0,t.jsx)(c.g,{className:"z-50 !bg-white rounded-lg p-6 relative",children:e=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.c,{className:"flex flex-col gap-1 pb-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Create New Task"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Adding to: ",(0,t.jsx)("span",{className:"font-medium",children:a})]})]}),(0,t.jsx)("button",{onClick:e,className:"absolute top-6 right-6 hover:cursor-pointer",children:(0,t.jsx)(l.LMj,{className:"text-gray-800"})})]})}),(0,t.jsx)(d.h,{className:"space-y-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Title"}),(0,t.jsx)("input",{type:"text",value:p,onChange:e=>f(e.target.value),placeholder:"Enter task title",className:"w-full px-3 py-2 text-gray-900 bg-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,t.jsx)("textarea",{value:b,onChange:e=>j(e.target.value),placeholder:"Enter task description",rows:4,className:"w-full px-3 py-2 text-gray-900 bg-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 resize-none"})]})]})}),(0,t.jsxs)(m.q,{className:"pt-6 gap-3",children:[(0,t.jsx)(u.T,{color:"default",variant:"light",onPress:e,radius:"md",className:"px-6 py-2 text-gray-700 hover:cursor-pointer rounded-md !bg-gray-200",children:"Cancel"}),(0,t.jsx)(u.T,{color:"primary",onPress:v,radius:"md",isLoading:y,isDisabled:!p.trim(),className:"px-6 py-2 bg-blue-500 hover:cursor-pointer text-white font-medium rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Create Task"})]})]})})})}var f=s(4077),b=s(22708),j=s(63162),y=s(7558),N=s(19652),v=s(25556),w=s(50766),k=s(85864);function S(e){let{card:r,onEdit:s,onDelete:a}=e,[l,i]=(0,n.useState)(!1),[c,o]=(0,n.useState)(r.title),[d,m]=(0,n.useState)(r.description||"");return l?(0,t.jsx)(f.Z,{className:"w-full mb-4",children:(0,t.jsx)(b.U,{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,t.jsx)("input",{type:"text",value:c,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 text-gray-900 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",placeholder:"Enter task title"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,t.jsx)("textarea",{value:d,onChange:e=>m(e.target.value),rows:3,className:"w-full px-3 py-2 text-gray-900 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 resize-none",placeholder:"Enter task description"})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsx)(u.T,{size:"sm",color:"primary",onPress:()=>{c.trim()&&(s(r.id,c.trim(),d.trim()),i(!1))},isDisabled:!c.trim(),className:"flex-1",children:"Save"}),(0,t.jsx)(u.T,{size:"sm",variant:"light",onPress:()=>{o(r.title),m(r.description||""),i(!1)},className:"flex-1",children:"Cancel"})]})]})})}):(0,t.jsxs)(f.Z,{className:"w-full mb-4 hover:shadow-md transition-shadow bg-white border-gray-400 rounded-lg p-4",children:[(0,t.jsx)(j.d,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex w-full justify-between items-start",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-900 line-clamp-2",children:r.title}),(0,t.jsxs)(y.A,{children:[(0,t.jsx)(N.b,{children:(0,t.jsx)(u.T,{isIconOnly:!0,variant:"light",size:"sm",className:"text-gray-400 hover:text-gray-600 hover:cursor-pointer",children:(0,t.jsx)(k.OMj,{})})}),(0,t.jsxs)(v.y,{"aria-label":"Card actions",className:"bg-white rounded-lg overflow-hidden min-w-20 border border-gray-200 shadow-lg",children:[(0,t.jsx)(w.Y,{onPress:()=>i(!0),className:"text-gray-700 px-2 py-1 hover:cursor-pointer hover:bg-gray-100",children:"Edit"},"edit"),(0,t.jsx)(w.Y,{onPress:()=>a(r.id),className:"text-red-700 px-2 py-1 hover:cursor-pointer hover:bg-gray-100",children:"Delete"},"delete")]})]})]})}),r.description&&(0,t.jsx)(b.U,{className:"pt-0",children:(0,t.jsx)("p",{className:"text-xs text-gray-600 line-clamp-3",children:r.description})})]})}var C=s(18850);function E(e){let{col:r,board:s,setBoard:l}=e,n=(0,C.j)(),i=async(e,r,t)=>{try{let a=function(e,r,s,t){let a={...e,columns:e.columns.map(e=>({...e,cards:e.cards.map(e=>e.id===r?{...e,title:s,description:t,updated_at:new Date().toISOString()}:e)}))};return g(a),a}(s,e,r,t);l(a)}catch(e){console.error("Error updating card:",e)}},c=async e=>{try{let r=function(e,r){let s={...e,columns:e.columns.map(e=>({...e,cards:e.cards.filter(e=>e.id!==r)}))};return g(s),s}(s,e);l(r)}catch(e){console.error("Error deleting card:",e)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"w-full h-full bg-gray-100 ",children:[(0,t.jsxs)("div",{className:"w-full py-4 px-3 my-auto flex flex-col gap-1 items-center justify-center",children:[(0,t.jsx)("p",{className:"text-lg",children:r.title}),(0,t.jsx)("p",{className:"text-sm text-gray-700",children:"".concat(r.cards.length," Tasks")}),(0,t.jsx)("button",{onClick:()=>{console.log("Button clicked - opening modal"),n.onOpen()},className:"mt-4 w-full !h-10 !min-h-10 flex items-center justify-center bg-white border border-gray-300 rounded-md hover:cursor-pointer",children:(0,t.jsx)(a.eph,{className:"text-gray-700"})})]}),(0,t.jsx)("div",{className:"flex flex-col gap-4 px-3 pb-4",children:r.cards.map(e=>(0,t.jsx)(S,{card:e,onEdit:i,onDelete:c},e.id))})]}),(0,t.jsx)(p,{modalProps:n,colIndex:r.index,columnName:r.title,board:s,setBoard:l})]})}function O(){let[e,r]=(0,n.useState)(null),[s,a]=(0,n.useState)(!0),[l,i]=(0,n.useState)(null);return((0,n.useEffect)(()=>{try{a(!0);let e=function(){try{let e=localStorage.getItem(x);if(e)return JSON.parse(e)}catch(e){console.error("Error loading board from localStorage:",e)}return h}();r(e)}catch(e){i(e instanceof Error?e.message:"Failed to load board")}finally{a(!1)}},[]),s)?(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)("p",{children:"Loading board from database..."})}):l?(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsxs)("p",{className:"text-red-500",children:["Error: ",l]})}):(0,t.jsxs)("div",{className:"w-full h-full flex flex-col ",children:[(0,t.jsx)("div",{className:"flex w-full items-center justify-between px-4 pb-4 border-b border-b-gray-400",children:(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-700",children:"Kanban Board"})}),e&&(0,t.jsx)("div",{className:"flex h-full w-full border border-gray-400",children:e.columns.map((s,a)=>(0,t.jsx)("div",{className:"h-full flex-1 min-w-0 border-r border-gray-400 last:!border-r-0",children:(0,t.jsx)(E,{col:s,board:e,setBoard:r})},a))})]})}},84984:(e,r,s)=>{Promise.resolve().then(s.bind(s,6919))}},e=>{e.O(0,[133,512,7,255,939,441,964,358],()=>e(e.s=84984)),_N_E=e.O()}]);